import{r as s,j as t,s as E}from"./index-Cd2wByZD.js";import{I as y,f as O}from"./ItemProduit-Br76oUqT.js";import{B as a}from"./ButtonToggle-Uiyexc3e.js";const P=()=>{const[h,f]=s.useState(0);s.useEffect(()=>{const e=()=>{f(document.querySelector("#root").offsetWidth)};return window.addEventListener("resize",e),e(),()=>{window.addEventListener("resize",e)}},[]);const[p,x]=s.useState([]),[j,v]=s.useState(!1),[S,b]=s.useState(!1),[l,H]=s.useState({gelDouche:!0,huile:!0,huileSatinee:!0,creme:!0}),[u,I]=s.useState({bretagne:!0,corse:!0,coteAzur:!0,provence:!0}),[d,T]=s.useState(["gelDouche","huile","huileSatinee","creme"]),[g,A]=s.useState(["bretagne","corse","coteAzur","provence"]);s.useEffect(()=>{(async()=>{try{const{data:r,status:m,error:i}=await E.from("produits").select("*").in("categorieId",d).in("gammeId",g);m===200&&x(r)}catch(r){console.log("Error fetching: ",r)}})()},[d,g]);const o=(e,r,m)=>{e==="categorie"&&H(i=>j?{...i,[r]:!i[r]}:(v(!0),Object.keys(i).reduce((n,c)=>(n[c]=c===r,n),{}))),e==="gamme"&&I(i=>S?{...i,[r]:!i[r]}:(b(!0),Object.keys(i).reduce((n,c)=>(n[c]=c===r,n),{})))};return s.useEffect(()=>{T(Object.entries(l).filter(([e,r])=>r===!0).map(([e])=>e))},[l]),s.useEffect(()=>{A(Object.entries(u).filter(([e,r])=>r===!0).map(([e])=>e))},[u]),t.jsxs("div",{id:"page-shop",children:[t.jsx("title",{children:"Shop Évasion - cosmétique & hygiène"}),t.jsx("meta",{name:"description",content:"Au cœur de nos formules généreuses, aux textures sensorielles et aux senteurs addictives, notre laboratoire intègre des huiles essentielles 100% pures et naturelles qui libèrent leurs bienfaits actifs et créent une bulle de reconnexion à la nature."}),t.jsxs("div",{id:"container-section-shop",className:"container container-grid",children:[t.jsx("h1",{children:"Shop"}),t.jsxs("div",{id:"container-filter",children:[t.jsxs("div",{className:"liste-filter",children:[t.jsx("h2",{className:"name-category",children:"Nos produits"}),t.jsxs("ul",{children:[t.jsx(a,{filtre:"categorie",placeHolder:"Gel douche",name:"gelDouche",onToggle:o}),t.jsx(a,{filtre:"categorie",placeHolder:"Huile douche",name:"huile",onToggle:o}),t.jsx(a,{filtre:"categorie",placeHolder:"Huile satinée",name:"huileSatinee",onToggle:o}),t.jsx(a,{filtre:"categorie",placeHolder:"Crème",name:"creme",onToggle:o})]})]}),t.jsxs("div",{className:"liste-filter",children:[t.jsx("h2",{className:"name-category",children:"Nos gammes"}),t.jsxs("ul",{children:[t.jsx(a,{filtre:"gamme",placeHolder:"Bretagne",name:"bretagne",onToggle:o}),t.jsx(a,{filtre:"gamme",placeHolder:"Corse",name:"corse",onToggle:o}),t.jsx(a,{filtre:"gamme",placeHolder:"Côte d'Azur",name:"coteAzur",onToggle:o}),t.jsx(a,{filtre:"gamme",placeHolder:"Provence",name:"provence",onToggle:o})]})]})]}),t.jsx("div",{id:"container-shop",children:p.map(e=>t.jsx(y,{id:e.id,uudid:e.uuid,categorieId:e.categorieId,name:e.name,uuid:e.uuid,lien:O.urlProduit(e.categorieId,e.uuid),gamme:e.gamme,img:e.img,mobile:h<490&&!0,prix:e.prix,format:e.format,chapeau:e.chapeau},e.id))})]})]})};export{P as default};
