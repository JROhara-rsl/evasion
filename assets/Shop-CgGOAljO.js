import{r as s,u as z,j as t,s as O}from"./index-DGjNd0hT.js";import{I as P,f as N}from"./ItemProduit-CnBBUqG8.js";import{B as i}from"./ButtonToggle-CBlsq7t_.js";const q=()=>{const[x,j]=s.useState(0);s.useEffect(()=>{const e=()=>{j(document.querySelector("#root").offsetWidth)};return window.addEventListener("resize",e),e(),()=>{window.addEventListener("resize",e)}},[]);const v=z(),{gammeParams:d}=v,[S,b]=s.useState([]),[A,H]=s.useState(!1),[I,T]=s.useState(!1),[g,E]=s.useState({gelDouche:!0,huile:!0,huileSatinee:!0,creme:!0}),[m,y]=s.useState({bretagne:!0,corse:!0,coteAzur:!0,provence:!0}),[l,h]=s.useState(["gelDouche","huile","huileSatinee","creme"]),[u,f]=s.useState(d?[d]:["bretagne","corse","coteAzur","provence"]);s.useEffect(()=>{(async()=>{try{const{data:r,status:p,error:a}=await O.from("produits").select("*").in("categorieId",l).in("gammeId",u);p===200&&b(r)}catch(r){console.log("Error fetching: ",r)}})()},[l,u]);const o=(e,r,p)=>{e==="categorie"&&E(a=>A?{...a,[r]:!a[r]}:(H(!0),Object.keys(a).reduce((n,c)=>(n[c]=c===r,n),{}))),e==="gamme"&&y(a=>I?{...a,[r]:!a[r]}:(T(!0),Object.keys(a).reduce((n,c)=>(n[c]=c===r,n),{}))),l.length<2&&h(["gelDouche","huile","huileSatinee","creme"]),u.length<2&&f(["bretagne","corse","coteAzur","provence"])};return s.useEffect(()=>{console.log(l),h(Object.entries(g).filter(([e,r])=>r===!0).map(([e])=>e))},[g]),s.useEffect(()=>{console.log(u),f(Object.entries(m).filter(([e,r])=>r===!0).map(([e])=>e))},[m]),t.jsxs("div",{id:"page-shop",children:[t.jsx("title",{children:"Shop Évasion - cosmétique & hygiène"}),t.jsx("meta",{name:"description",content:"Au cœur de nos formules généreuses, aux textures sensorielles et aux senteurs addictives, notre laboratoire intègre des huiles essentielles 100% pures et naturelles qui libèrent leurs bienfaits actifs et créent une bulle de reconnexion à la nature."}),t.jsxs("div",{id:"container-section-shop",className:"container container-grid",children:[t.jsx("h1",{children:"Shop"}),t.jsxs("div",{id:"container-filter",children:[t.jsxs("div",{className:"liste-filter",children:[t.jsx("h2",{className:"name-category",children:"Nos produits"}),t.jsxs("ul",{children:[t.jsx(i,{filtre:"categorie",placeHolder:"Gel douche",name:"gelDouche",onToggle:o}),t.jsx(i,{filtre:"categorie",placeHolder:"Huile douche",name:"huile",onToggle:o}),t.jsx(i,{filtre:"categorie",placeHolder:"Huile satinée",name:"huileSatinee",onToggle:o}),t.jsx(i,{filtre:"categorie",placeHolder:"Crème",name:"creme",onToggle:o})]})]}),t.jsxs("div",{className:"liste-filter",children:[t.jsx("h2",{className:"name-category",children:"Nos gammes"}),t.jsxs("ul",{children:[t.jsx(i,{filtre:"gamme",placeHolder:"Bretagne",name:"bretagne",onToggle:o}),t.jsx(i,{filtre:"gamme",placeHolder:"Corse",name:"corse",onToggle:o}),t.jsx(i,{filtre:"gamme",placeHolder:"Côte d'Azur",name:"coteAzur",onToggle:o}),t.jsx(i,{filtre:"gamme",placeHolder:"Provence",name:"provence",onToggle:o})]})]})]}),t.jsx("div",{id:"container-shop",children:S.map(e=>t.jsx(P,{id:e.id,uudid:e.uuid,categorieId:e.categorieId,name:e.name,uuid:e.uuid,lien:N.urlProduit(e.categorieId,e.uuid),gamme:e.gamme,img:e.img,mobile:x<490&&!0,prix:e.prix,format:e.format,chapeau:e.chapeau},e.id))})]})]})};export{q as default};
