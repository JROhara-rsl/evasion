import{j as e,L as l,B as h,u as j,r as m,b as g,S as v,s as p}from"./index-Bs3XlrM0.js";import{f as u}from"./functionActualite-CmQu_hVt.js";const f=({result:s})=>s.table==="produits"?e.jsx("div",{className:"product-card container-post",children:e.jsxs("div",{className:"container-post-meta",children:[e.jsx(l,{to:"/shop/item/"+s.categorieId+"/"+s.uuid,className:"post-image",children:e.jsx("img",{alt:s.name,src:"http://localhost:5173/public/assets/img/"+s.img+"-350px.png"})}),e.jsxs("div",{className:"container-meta",children:[e.jsx("h3",{className:"title-post-post",children:s.name}),e.jsxs("div",{className:"meta",children:[e.jsx("span",{children:s.gamme}),e.jsxs("span",{children:[s.format,"ml"]})]}),e.jsx("hr",{}),e.jsx("p",{children:"Huile de douche aux huiles essentielles avec des notes d’agrumes."}),e.jsx(h,{name:"Découvrir le produit",lien:"/shop/item/"+s.categorieId+"/"+s.uuid})]})]})}):s.table==="articles"?e.jsx("div",{className:"article-card container-post",children:e.jsxs("div",{className:"container-post-meta",children:[e.jsx(l,{to:u.urlArticle(s.title,s.id),className:"post-image",children:e.jsx("img",{alt:s.name,src:"http://localhost:5173"+s.image+"-400px.jpg"})}),e.jsxs("div",{className:"container-meta",children:[e.jsx("h3",{className:"title-post-post",children:s.title}),e.jsxs("div",{className:"meta",children:[e.jsx("span",{children:s.category_article}),e.jsx("span",{children:s.author})]}),e.jsx("hr",{}),e.jsx(h,{name:"Découvrir l'article",lien:u.urlArticle(s.title,s.id)})]})]})}):null,R=()=>{const s=j(),{searchTerm:a}=s,[c,x]=m.useState([]);return m.useEffect(()=>{(async()=>{try{let r=[];const{data:t,error:n}=await p.from("produits").select("*").or(`name.ilike.%${a}%,gamme.ilike.%${a}%`);n?console.warn("Erreur lors de la recherche dans produits:",n):t.length>0&&r.push({table:"produits",results:t});const{data:o,error:d}=await p.from("articles").select("*").or(`title.ilike.%${a}%,chapeau.ilike.%${a}%,content.ilike.%${a}%`);d?console.warn("Erreur lors de la recherche dans articles:",d):o.length>0&&r.push({table:"articles",results:o}),x(r)}catch(r){console.error("Erreur lors de la recherche :",r)}})()},[a]),console.log("Résultats avant rendu :",c),e.jsxs("div",{children:[e.jsx("title",{children:"Votre recherche"}),e.jsx("meta",{name:"description",content:a?"Recherche : "+a:"Résultat de la recherche"}),e.jsxs("div",{id:"page-rechercher",className:"container",children:[e.jsxs("header",{children:[e.jsx("h1",{className:"",children:"Votre recherche"}),e.jsxs("span",{id:"link-breadcrumb",className:"",children:[e.jsx(g,{name:"Retour à l'accueil",lien:"/",img:"../../public/assets/picto/picto-back.svg"}),e.jsx(l,{to:"/",children:"Évasion"})]})]}),e.jsxs("div",{className:"container-grid",children:[e.jsx(v,{active:"true"}),e.jsx("div",{id:"container-search-post",children:c.length===0?e.jsx("p",{children:"Aucun résultat trouvé."}):c.map((i,r)=>i.results.map(t=>e.jsx(f,{result:{table:i.table,...t}},t.uuid)))})]})]})]})};export{R as default};
